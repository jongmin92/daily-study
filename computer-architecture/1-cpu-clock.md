# 컴퓨터 구조에 대한 첫 번째 이야기
- 영상
    - https://www.youtube.com/watch?v=GVX-m3RF-K0&list=PLVsNizTWUw7E2KrfnsyEjTqo-6uKiQoxc&index=1
    - https://www.youtube.com/watch?v=bGPYyVAXG9I&list=PLVsNizTWUw7E2KrfnsyEjTqo-6uKiQoxc&index=2
- 참고
    - https://cjwoov.tistory.com/10?category=800243
    - https://cjwoov.tistory.com/12?category=800243

# 시스템 프로그래밍
- **시스템**이란 용어의 범위는 **하드웨어**와 **운영체제**를 모두 포함한다.
- 컴퓨터 시스템을 활용하는 소프트웨어 개발
    - Windows 운영체제 자체의 기능을 활용하는 프로그래밍

# 컴퓨터 시스템의 주요 구성요소
![hardward](/computer-architecture/image/1-cpu-clock/hardware.png)
- CPU <-> 캐쉬 <-> 메인 메모리 <-> 하드디스크
- 컴퓨터 하드웨어 구성
    - **CPU (Central Processing Unit)**
        - 중앙처리장치
        - 연산이 이뤄지는 원리가 중요.
    - **메인 메모리 (Main Memory)**
        - 램(RAM)
        - 프로그램 실행 방식을 이해하는 것이 중요.
    - **입출력 버스 (Input/Output Bus)**
        - 데이터 송 수신이 이뤄지는 원리가 중요.
> 컴퓨터가 0과 1의 값 만을 이해하고 계산한다는 것은 모두가 알고 있다. 계산을 위한 0과 1의 값은 `메모리`에 위치하고 있고 해당 값을 `CPU`에서 가져다 처리하는데, 이때 이동 경로를 `입출력 버스`라고 기억하자.

## CPU
- 구성요소
    - ALU (Arithmetic Logic Unit)
    - 컨트롤 유닛 (Control Unit)
    - 레지스터 (Register Set)
    - 버스 인터페이스 (Bus Interface)
- 덧셈 기능을 가진 프로그램을 작성하고 컴파일 하면 실행파일(바이너리 파일)로서 하드디스크(보조기억장치)에 저장된다.
- 프로그램을 실행하기 위해서는 CPU가 사용할 수 있도록 메인 메모리로 올려야한다.
    - 각 장치간의 데이터 이동은 입 출력 버스를 통한다. (전기적인 신호를 통해 데이터가 이동함)
    - 입 출력 버스에 연결되어 있는 모든 기기들은 버스 인터페이스(어뎁터라고도 부른다)를 구현하고 있어야 한다. (프로토콜을 알고 있어야 통신이 가능하기 때문)
- 하드디스크에서 메인 메모리로 올라간 프로그램도 버스를 통해 다시 CPU까지 이동이 필요하다.
- 궁극적으로 실제 연산을 하는 ALU까지 이동해야 함.
    - 덧셈이라는 명령어(바이너리 코드)는 컨트롤 유닛으로 이동.
    - 컨트롤 유닛이 ALU에게 덧셈을 하라고 알려준다.
- ALU 혹은 컨트롤 유닛에 데이터를 바로 넣으면 문제가 생길 수 있다.
    - 따라서 CPU 내부에도 저장 장치를 두고 ALU 혹은 컨트롤 유닛이 필요할 때 가져다 쓰도록 한다. 이 저장 장치가 레지스터이다.
- 정리
    1. 컨트롤 유닛은 레지스터에 저장된 명령어를 가져간다.
    2. ALU에게 덧셈을 하라는 시그널을 주고, 피연산자가 실제로 ALU로 이동하도록 한다.
    3. ALU는 덧셈을 하고 그 결과를 레지스터에 다시 저장한다.

## 클럭 신호 (Clock Pulse)
- 컴퓨터의 모든 장치에는 클럭 신호가 들어간다.
- 동작 타이밍
    - 클럭 발생기의 클럭 (일정 시간마다 신호를 만들고, 모든 장치에 신호가 전달된다.)
    - 컴퓨터 각 요소들의 동작 타이밍을 맞추기 위해 필요함. (각 장치마다 동작 속도가 다르기 때문)
        - 클럭이 발생할 때마다 연산이 이루어 진다고 보면 된다.
        - 클럭이 높으면 더 많은 연산으로 빠르게 수행할 수 있지만, 그만큼 발열이 생긴다. (오버 클럭킹)

> 일반적으로 클럭은 순차회로(Sequential Circuit)에 가해지는 전기적 진동의 속도를 나타내는 단위이며 Hz로 표기한다.  
> 클럭 자체는 연산 장치가 스스로 발생시키는 것이 아니다. 메인보드의 특정 부품에서 전기적 진동을 만들어서 디지털 회로에 공급한다.  
> 모든 연산 장치는 전기적 진동을 견딜 수 있는 최대 한계치가 있는데, 이를 넘어서게 되면 회로가 타버리거나 이상 작동을 하는 상황이 생길 수 있으므로 적절하게 조절해서 사용해야 한다. 이를 해제하고 단위 시간당 작동 횟수를 높이는 것이 오버클럭이다.  
> https://namu.wiki/w/%ED%81%B4%EB%9F%AD#s-1
>
> CPU의 사양을 보면 2.9GHz와 같이 클럭 관련된 부분이 있다. 2.9GHz면 초당 29억(2,900,000,000)번의 연산을 수행한다라고 인식해도 될 것 같다. 겁나 빠르다...

## 프로그램 실행과정
**전처리기 -> 컴파일러 -> 어셈블러 -> 링커**
- 전처리기에 의한 치환작업: #으로 시작하는 지시자
- 컴파일러에 의한 번역: CPU의 명령어로 번역
- 어셈블러에 의한 바이너리 코드 생성: CPU의 명령어를 바이너리 코드로 번역
- 링커에 의한 연결과 결합: 라이브러리와의 결합

## Stored Program Concept (폰 노이만 아키텍쳐)
![hardward](/computer-architecture/image/1-cpu-clock/stored_program_concept.png)
- Fetch
    - CPU 내부로 명령어 이동
- Decode
    - 명령어 해석
    - 컨트롤 유닛
- Execution
    - 연산을 진행
    - 보통은 ALU를 의미

## 데이터 이동의 기반 버스 시스템
- 데이터 버스
    - 데이터 이동
- 어드레스 버스
    - 주소 이동
- 컨트롤 버스
    - 컨트롤 신호 이동

버스는 양방향이다. 데이터(어드레스)는 CPU <-> 메모리 이동 가능하기 때문에, 순서를 정하기 위해 컨트롤 버스가 필요하다.

![conclusion](/computer-architecture/image/1-cpu-clock/conclusion.png)
